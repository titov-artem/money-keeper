<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- services -->
    <bean id="storeService" class="com.github.money.keeper.service.impl.StoreServiceImpl">
        <property name="transactionRepo" ref="transactionRepo"/>
        <property name="storeClusterizer" ref="storeClusterizer"/>
        <property name="storeRepo" ref="storeRepo"/>
    </bean>

    <bean id="categoryService" class="com.github.money.keeper.service.impl.CategoryServiceImpl">
        <property name="categoryRepo" ref="categoryRepo"/>
        <property name="storeRepo" ref="storeRepo"/>
        <property name="storeToCategoryRepo" ref="storeToCategoryRepo"/>
    </bean>

    <bean id="transactionService" class="com.github.money.keeper.service.impl.TransactionServiceImpl">
        <property name="storeService" ref="storeService"/>
        <property name="transactionRepo" ref="transactionRepo"/>
    </bean>

    <!-- parsers -->
    <bean id="raiffeisenTransactionParser" class="com.github.money.keeper.parser.RaiffeisenTransactionParser"/>

    <bean id="tinkoffTransactionParser" class="com.github.money.keeper.parser.TinkoffTransactionParser"/>

    <bean id="transactionParserProvider" class="com.github.money.keeper.parser.TransactionParserProvider">
        <property name="parsers">
            <map>
                <entry key="RAIFFEISEN_CARD" value-ref="raiffeisenTransactionParser"/>
                <entry key="TINKOFF" value-ref="tinkoffTransactionParser"/>
            </map>
        </property>
    </bean>

    <!-- clusterization -->
    <!-- TODO refactor hierarchy -->
    <bean id="salePointClusterizer" class="com.github.money.keeper.clusterization.SimpleByNameClusterizer"/>

    <bean id="storeClusterizer" class="com.github.money.keeper.clusterization.StoreClusterizer">
        <constructor-arg ref="salePointClusterizer"/>
    </bean>

    <!-- templates -->
    <bean id="templateSupport" class="com.github.money.keeper.view.ui.template.TemplateSupport"/>

    <bean id="uiTemplateSupport" class="com.github.money.keeper.view.ui.template.UITemplateSupport">
        <property name="templateSupport" ref="templateSupport"/>
    </bean>

</beans>